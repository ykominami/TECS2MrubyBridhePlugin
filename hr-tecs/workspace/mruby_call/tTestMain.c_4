/*
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ tecsgen ã«ã‚ˆã‚Šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒæ„å›³ã•ã‚Œã¦ã„ã¾ã™ãŒ
 * tecsgen ã®å†å®Ÿè¡Œã«ã‚ˆã‚Šä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€é€šå¸¸
 *   gen/tTestMain_template.c => src/tTestMain.c
 * ã®ã‚ˆã†ã«åå‰, ãƒ•ã‚©ãƒ«ãƒ€ã‚’å¤‰æ›´ã—ã¦ã‹ã‚‰ä¿®æ­£ã—ã¾ã™
 */
/* #[<PREAMBLE>]#
 * #[<...>]# ¤«¤é #[</...>]# ¤Ç°Ï¤Ş¤ì¤¿¥³¥á¥ó¥È¤ÏÊÔ½¸¤·¤Ê¤¤¤Ç¤¯¤À¤µ¤¤
 * tecsmerge ¤Ë¤è¤ë¥Ş¡¼¥¸¤Ë»ÈÍÑ¤µ¤ì¤Ş¤¹
 *
 * ¸Æ¤Ó¸ı´Ø¿ô #_TCPF_#
 * call port: cTECS2MrubyVM signature: sTECS2MrubyVM context:task
 *   void           cTECS2MrubyVM_init( );
 *   mrb_state*     cTECS2MrubyVM_get_mrb( );
 *   void           cTECS2MrubyVM_fin( );
 * call port: cBody2 signature: sMcall context:task
 *   void           cBody2_mcall_lcd( );
 *   void           cBody2_lcd( );
 *
 * #[</PREAMBLE>]# */

/* ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®£è¨€ã‚„å¤‰æ•°ã®å®šç¾©ã‚’ã“ã“ã«æ›¸ãã¾ã™ #_PAC_# */
#include "tTestMain_tecsgen.h"
#include <mruby.h>
#include <mruby/dump.h>

#ifndef E_OK
#define	E_OK	0		/* success */
#define	E_ID	(-18)	/* illegal ID */
#endif

/* å—ã‘å£é–¢æ•° #_TEPF_# */
/* #[<ENTRY_PORT>]# eBody
 * entry port: eBody
 * signature:  sTaskBody
 * context:    task
 * #[</ENTRY_PORT>]# */

/* #[<ENTRY_FUNC>]# eBody_main
 * name:         eBody_main
 * global_name:  tTestMain_eBody_main
 * oneway:       false
 * #[</ENTRY_FUNC>]# */
void
eBody_main(CELLIDX idx)
{
	CELLCB	*p_cellcb;
	if (VALID_IDX(idx)) {
		p_cellcb = GET_CELLCB(idx);
	}
	else {
		/* ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿°ã—ã¾ã™ */
	} /* end if VALID_IDX(idx) */

	cTECS2MrubyVM_init( );
	
	cBody2_mcall_lcd( );

	cTECS2MrubyVM_fin( );
	//ev3_lcd_draw_string("171717", 0, 0);

}

/* #[<POSTAMBLE>]#
 *   ¤³¤ì¤è¤ê²¼¤ËÈó¼õ¤±¸ı´Ø¿ô¤ò½ñ¤­¤Ş¤¹
 * #[</POSTAMBLE>]#*/
